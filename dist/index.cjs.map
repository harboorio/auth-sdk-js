{"version":3,"file":"index.cjs","sources":["../src/http-client.ts","../src/util.ts","../src/index.generated.ts"],"sourcesContent":["import axios, { type AxiosInstance, type AxiosRequestConfig } from \"axios\";\n\nexport const client: AxiosInstance = axios.create();\n\nexport async function processHttpRequest(method: string, url: string, endpointConfig?: Partial<AxiosRequestConfig>) {\n    const config: AxiosRequestConfig = Object.assign({}, endpointConfig ?? {}, {\n        method,\n        url,\n    });\n\n    try {\n        const response = await client(config);\n        return response.data;\n    } catch (error) {\n        if (error.response) {\n            // the server responded with a status that fails in validateStatus\n            return error.response.data;\n        } else if (error.request) {\n            // no response received, error.request is an instance of XMLHttpRequest\n            console.error(error);\n            return { error: { code: \"no_response\" } };\n        } else {\n            // request setup is incorrect\n            console.error(error);\n            return { error: { code: \"invalid_request_setup\", message: error.message } };\n        }\n    }\n}\n","export interface Util {\n    formDataToJson: <T extends Record<string, unknown>>(formData: FormData) => T;\n}\n\nexport const util: Util = {\n    formDataToJson,\n};\n\nfunction formDataToJson<T extends Record<string, unknown>>(formData: FormData) {\n    const json: Record<string, unknown> = {};\n    for (const pair of formData.entries()) {\n        const k = pair[0] as string;\n\n        if (k in json) {\n            if (!Array.isArray(json[k])) {\n                json[k] = [json[k]];\n            }\n\n            (json[k] as unknown[]).push(pair[1]);\n        } else {\n            json[k] = pair[1];\n        }\n    }\n    return json as T;\n}\n","import { client, processHttpRequest } from '@src/http-client'\nimport { util } from '@src/util'\nimport type { HarboorAuthHomeGetResponse, HarboorAuthOtpPostResponse, HarboorAuthOtpPostBody, HarboorAuthOtpPutResponse, HarboorAuthOtpPutBody } from './schema/index'\n\nclient.defaults.withCredentials = true\nclient.defaults.responseType = 'json'\nclient.defaults.validateStatus = function () {\n    return true;\n}\nclient.defaults.baseURL = ''\n\nconst sdk = {\n    util,\n    client,\n    get: async (): Promise<HarboorAuthHomeGetResponse> => {\n        return (await processHttpRequest('get', '/')) as HarboorAuthHomeGetResponse\n    },\n    otp: {\n        post: async (json: HarboorAuthOtpPostBody): Promise<HarboorAuthOtpPostResponse> => {\n            return (await processHttpRequest('post', '/otp', { data: json })) as HarboorAuthOtpPostResponse\n        },\n        put: async (json: HarboorAuthOtpPutBody): Promise<HarboorAuthOtpPutResponse> => {\n            return (await processHttpRequest('put', '/otp', { data: json })) as HarboorAuthOtpPutResponse\n        },\n    },\n}\n\nexport { sdk }\n"],"names":["client","axios","create","processHttpRequest","method","url","endpointConfig","config","Object","assign","response","data","error","request","console","code","message","util","formDataToJson","formData","json","pair","entries","k","Array","isArray","push","defaults","withCredentials","responseType","validateStatus","baseURL","sdk","get","otp","post","put"],"mappings":";;;;AAEO,MAAMA,MAAM,GAAkBC,KAAK,CAACC,MAAM,EAAE;AAE5C,eAAeC,kBAAkBA,CAACC,MAAc,EAAEC,GAAW,EAAEC,cAA4C,EAAA;AAC9G,EAAA,MAAMC,MAAM,GAAuBC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAEH,cAAc,IAAI,EAAE,EAAE;IACvEF,MAAM;AACNC,IAAAA;AACH,GAAA,CAAC;EAEF,IAAI;AACA,IAAA,MAAMK,QAAQ,GAAG,MAAMV,MAAM,CAACO,MAAM,CAAC;IACrC,OAAOG,QAAQ,CAACC,IAAI;GACvB,CAAC,OAAOC,KAAK,EAAE;IACZ,IAAIA,KAAK,CAACF,QAAQ,EAAE;AAChB;AACA,MAAA,OAAOE,KAAK,CAACF,QAAQ,CAACC,IAAI;AAC9B,KAAC,MAAM,IAAIC,KAAK,CAACC,OAAO,EAAE;AACtB;AACAC,MAAAA,OAAO,CAACF,KAAK,CAACA,KAAK,CAAC;MACpB,OAAO;AAAEA,QAAAA,KAAK,EAAE;AAAEG,UAAAA,IAAI,EAAE;AAAe;OAAE;AAC7C,KAAC,MAAM;AACH;AACAD,MAAAA,OAAO,CAACF,KAAK,CAACA,KAAK,CAAC;MACpB,OAAO;AAAEA,QAAAA,KAAK,EAAE;AAAEG,UAAAA,IAAI,EAAE,uBAAuB;UAAEC,OAAO,EAAEJ,KAAK,CAACI;AAAO;OAAI;AAC/E;AACJ;AACJ;;ACvBO,MAAMC,IAAI,GAAS;AACtBC,EAAAA;CACH;AAED,SAASA,cAAcA,CAAoCC,QAAkB,EAAA;EACzE,MAAMC,IAAI,GAA4B,EAAE;EACxC,KAAK,MAAMC,IAAI,IAAIF,QAAQ,CAACG,OAAO,EAAE,EAAE;AACnC,IAAA,MAAMC,CAAC,GAAGF,IAAI,CAAC,CAAC,CAAW;IAE3B,IAAIE,CAAC,IAAIH,IAAI,EAAE;MACX,IAAI,CAACI,KAAK,CAACC,OAAO,CAACL,IAAI,CAACG,CAAC,CAAC,CAAC,EAAE;QACzBH,IAAI,CAACG,CAAC,CAAC,GAAG,CAACH,IAAI,CAACG,CAAC,CAAC,CAAC;AACvB;MAECH,IAAI,CAACG,CAAC,CAAe,CAACG,IAAI,CAACL,IAAI,CAAC,CAAC,CAAC,CAAC;AACxC,KAAC,MAAM;AACHD,MAAAA,IAAI,CAACG,CAAC,CAAC,GAAGF,IAAI,CAAC,CAAC,CAAC;AACrB;AACJ;AACA,EAAA,OAAOD,IAAS;AACpB;;ACpBApB,MAAM,CAAC2B,QAAQ,CAACC,eAAe,GAAG,IAAI;AACtC5B,MAAM,CAAC2B,QAAQ,CAACE,YAAY,GAAG,MAAM;AACrC7B,MAAM,CAAC2B,QAAQ,CAACG,cAAc,GAAG,YAAA;AAC7B,EAAA,OAAO,IAAI;AACf,CAAC;AACD9B,MAAM,CAAC2B,QAAQ,CAACI,OAAO,GAAG,EAAE;AAE5B,MAAMC,GAAG,GAAG;EACRf,IAAI;EACJjB,MAAM;EACNiC,GAAG,EAAE,YAAgD;AACjD,IAAA,OAAQ,MAAM9B,kBAAkB,CAAC,KAAK,EAAE,GAAG,CAAC;GAC/C;AACD+B,EAAAA,GAAG,EAAE;IACDC,IAAI,EAAE,MAAOf,IAA4B,IAAyC;AAC9E,MAAA,OAAQ,MAAMjB,kBAAkB,CAAC,MAAM,EAAE,MAAM,EAAE;AAAEQ,QAAAA,IAAI,EAAES;AAAM,OAAA,CAAC;KACnE;IACDgB,GAAG,EAAE,MAAOhB,IAA2B,IAAwC;AAC3E,MAAA,OAAQ,MAAMjB,kBAAkB,CAAC,KAAK,EAAE,MAAM,EAAE;AAAEQ,QAAAA,IAAI,EAAES;AAAM,OAAA,CAAC;AACnE;AACH;;;;;"}